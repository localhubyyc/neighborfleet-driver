<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f0f1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Track Your Order - YYC LocalFirst</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252542;
            --accent-green: #00d26a;
            --accent-green-dim: rgba(0, 210, 106, 0.15);
            --accent-orange: #ff6b35;
            --accent-blue: #4dabf7;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b8;
            --text-dim: #6b6b80;
            --border-color: #353550;
        }

        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Logo */
        .app-logo {
            text-align: center;
            padding: 0.75rem 0;
        }

        .logo-text {
            font-size: 1.4rem;
            font-weight: 800;
        }

        .logo-yyc {
            background: linear-gradient(135deg, #00d26a, #00a854);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Status Header */
        .status-header {
            text-align: center;
            padding: 1rem 0;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent-green-dim);
            color: var(--accent-green);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .status-badge .pulse-dot {
            width: 8px;
            height: 8px;
            background: currentColor;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }

        .status-header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.25rem;
        }

        .status-header p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Progress Steps */
        .progress-container {
            padding: 0.5rem 1rem 1.5rem;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 14px;
            left: 40px;
            right: 40px;
            height: 3px;
            background: var(--border-color);
            z-index: 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-green);
            width: 75%;
            transition: width 0.5s ease;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            z-index: 1;
        }

        .step-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .step.completed .step-icon {
            background: var(--accent-green);
        }

        .step.active .step-icon {
            background: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.3);
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0%, 100% { box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.3); }
            50% { box-shadow: 0 0 0 8px rgba(255, 107, 53, 0.1); }
        }

        .step-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-align: center;
            font-weight: 500;
        }

        .step.completed .step-label,
        .step.active .step-label {
            color: var(--text-secondary);
        }

        /* Map */
        .map-container {
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 1rem;
            height: 280px;
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-eta-overlay {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(15, 15, 26, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 0.75rem 1rem;
            z-index: 100;
        }

        .eta-label {
            font-size: 0.65rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .eta-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent-green);
        }

        .eta-value span {
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Driver Card */
        .driver-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .driver-avatar {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, #4dabf7, #228be6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }

        .driver-info {
            flex: 1;
        }

        .driver-name {
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 0.15rem;
        }

        .driver-vehicle {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .driver-rating {
            color: #fbbf24;
            font-size: 0.8rem;
            margin-top: 0.2rem;
        }

        .call-btn {
            width: 46px;
            height: 46px;
            background: var(--accent-green);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .call-btn:hover {
            transform: scale(1.1);
            background: #00b85c;
        }

        .call-btn svg {
            width: 22px;
            height: 22px;
            fill: white;
        }

        /* Order Card */
        .order-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .restaurant-name {
            font-weight: 700;
            font-size: 1rem;
        }

        .order-total {
            font-weight: 700;
            color: var(--accent-green);
        }

        .order-items {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Address Card */
        .address-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 1rem;
        }

        .address-row {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .address-icon {
            width: 36px;
            height: 36px;
            background: var(--accent-green-dim);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .address-icon svg {
            width: 18px;
            height: 18px;
            fill: var(--accent-green);
        }

        .address-content {
            flex: 1;
        }

        .address-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .address-text {
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 1.5rem 0;
            color: var(--text-dim);
            font-size: 0.8rem;
        }

        .footer a {
            color: var(--accent-green);
            text-decoration: none;
        }

        /* Demo Badge */
        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--accent-orange);
            color: white;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="demo-badge">Demo Mode</div>
    
    <div class="container">
        <!-- Logo -->
        <div class="app-logo">
            <span class="logo-text">
                <span class="logo-yyc">YYC</span> LocalFirst
            </span>
        </div>

        <!-- Status -->
        <div class="status-header">
            <div class="status-badge">
                <span class="pulse-dot"></span>
                <span id="statusText">On the way</span>
            </div>
            <h1 id="mainStatus">Your driver is arriving</h1>
            <p id="subStatus">Raj is heading to your location</p>
        </div>

        <!-- Progress Steps -->
        <div class="progress-container">
            <div class="progress-steps">
                <div class="progress-line"><div class="progress-fill" id="progressFill"></div></div>
                <div class="step completed">
                    <div class="step-icon">‚úì</div>
                    <div class="step-label">Ordered</div>
                </div>
                <div class="step completed">
                    <div class="step-icon">‚úì</div>
                    <div class="step-label">Preparing</div>
                </div>
                <div class="step completed">
                    <div class="step-icon">‚úì</div>
                    <div class="step-label">Picked Up</div>
                </div>
                <div class="step active" id="deliveryStep">
                    <div class="step-icon">üöó</div>
                    <div class="step-label">Delivering</div>
                </div>
            </div>
        </div>

        <!-- Map -->
        <div class="map-container">
            <div class="map-eta-overlay">
                <div class="eta-label">Arriving in</div>
                <div class="eta-value" id="etaValue">8 <span>min</span></div>
            </div>
            <div id="map"></div>
        </div>

        <!-- Driver Card -->
        <div class="driver-card">
            <div class="driver-avatar">RS</div>
            <div class="driver-info">
                <div class="driver-name">Raj Singh</div>
                <div class="driver-vehicle">Red Toyota Camry ‚Ä¢ ABC 123</div>
                <div class="driver-rating">‚≠ê 4.9 (127 deliveries)</div>
            </div>
            <button class="call-btn" onclick="alert('Demo mode - calling disabled')">
                <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            </button>
        </div>

        <!-- Order Card -->
        <div class="order-card">
            <div class="order-header">
                <div class="restaurant-name">üçï AB King Pizza</div>
                <div class="order-total">$37.79</div>
            </div>
            <div class="order-items">
                1√ó Super Loaded Pizza (Large)<br>
                1√ó Garlic Bread<br>
                2√ó Can Pop (Coke)
            </div>
        </div>

        <!-- Address Card -->
        <div class="address-card">
            <div class="address-row">
                <div class="address-icon">
                    <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                </div>
                <div class="address-content">
                    <div class="address-label">Delivering to</div>
                    <div class="address-text">456 Marlborough Way NE, Calgary</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            Powered by <a href="#">YYC LocalFirst</a> ‚Ä¢ Supporting local Calgary üíö
        </div>
    </div>

    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4T_RiDo2RqzDZNnhoUwwsrEQqf1AjUMs&callback=initMap" async defer></script>
    
    <script>
        // ============================================
        // REAL CALGARY ROUTE - Following actual streets
        // From AB King Pizza to customer on Marlborough Way
        // ============================================
        
        const ROUTE_POINTS = [
            // Start: AB King Pizza on Rundlehorn Dr NE
            { lat: 51.08680, lng: -113.95730 },
            { lat: 51.08680, lng: -113.95680 },
            { lat: 51.08680, lng: -113.95630 },
            { lat: 51.08680, lng: -113.95580 },
            { lat: 51.08680, lng: -113.95530 },
            { lat: 51.08680, lng: -113.95480 },
            // Continue east on Rundlehorn
            { lat: 51.08680, lng: -113.95430 },
            { lat: 51.08680, lng: -113.95380 },
            { lat: 51.08680, lng: -113.95330 },
            { lat: 51.08680, lng: -113.95280 },
            { lat: 51.08680, lng: -113.95230 },
            { lat: 51.08680, lng: -113.95180 },
            { lat: 51.08680, lng: -113.95130 },
            { lat: 51.08680, lng: -113.95080 },
            // Turn south at intersection
            { lat: 51.08650, lng: -113.95080 },
            { lat: 51.08620, lng: -113.95080 },
            { lat: 51.08590, lng: -113.95080 },
            { lat: 51.08560, lng: -113.95080 },
            // Turn east onto 62 Ave
            { lat: 51.08560, lng: -113.95030 },
            { lat: 51.08560, lng: -113.94980 },
            { lat: 51.08560, lng: -113.94930 },
            { lat: 51.08560, lng: -113.94880 },
            { lat: 51.08560, lng: -113.94830 },
            { lat: 51.08560, lng: -113.94780 },
            { lat: 51.08560, lng: -113.94730 },
            { lat: 51.08560, lng: -113.94680 },
            { lat: 51.08560, lng: -113.94630 },
            { lat: 51.08560, lng: -113.94580 },
            // Continue on 62 Ave
            { lat: 51.08560, lng: -113.94530 },
            { lat: 51.08560, lng: -113.94480 },
            { lat: 51.08560, lng: -113.94430 },
            { lat: 51.08560, lng: -113.94380 },
            { lat: 51.08560, lng: -113.94330 },
            { lat: 51.08560, lng: -113.94280 },
            { lat: 51.08560, lng: -113.94230 },
            { lat: 51.08560, lng: -113.94180 },
            // Turn onto Marlborough Way
            { lat: 51.08530, lng: -113.94180 },
            { lat: 51.08500, lng: -113.94180 },
            { lat: 51.08470, lng: -113.94180 },
            { lat: 51.08440, lng: -113.94180 },
            { lat: 51.08410, lng: -113.94180 },
            // Destination
            { lat: 51.08380, lng: -113.94180 },
        ];

        const RESTAURANT_POS = ROUTE_POINTS[0];
        const CUSTOMER_POS = ROUTE_POINTS[ROUTE_POINTS.length - 1];
        
        // Red car icon
        const CAR_ICON_BASE64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD8UlEQVR4nO2ZW4hVVRjHf+OYl8wcNTXNyjQfDLqQGiZBF4h6iIoiCLqAFBT0EEE9RO8RFfTQQy9BEEEU9BAU9BD0UPQQ9BB0ASuNyjRrHMfR8TKjM+P8+9ibZuacc/Y+Z++zj84PLth7r/Vf61v/67fWOQtGMYr/L84HNgNLgHOBy4BO4G1gP7AV+Ar4B+gHBoBhYAQ4A3QDGzL2ORa4A/gJ6AT+Aj4HvgT+AP7JcNCJwIpMB68EVuTU5yzgTmB5xvH7gN3Ai8A7wNEM5keBM8BHwHXADcDCnO2OBy4CrgcWZRxnN/AcsBk4lMH8MNAJ/As8D9wMXJCz7UHgOeAt4GRG89eB64C7gbNztvs78BTwKTCYwfwg8DxwJ3BOzjY7gD3AcuBaYE7Odofl9xywBRjKON5+4M/0/pwNXJqz3Z+BF4AngN8ymj8BbAKuAWbnbPNvYAfwNLAXGMo4XhewC7gDmJWzzV7gHWA18FOOA48BvwHvAjcCs3O2ux/YBDwKHMhxwOHSfuAd4CZgVs42e4Ge9P48CvyW0XwP8DZwMzAzZ5t9wEHgYeBPYCTjeD3AUmBGzjbPKPCzwPPACeA0MJwxYB+wLPU7I2ebQ8A3wL3AMeBUxvH6gGXAdQV8DgJvA0uAP7IyDwwC3wL3AEeBkxnH6weWA/MK+OwH3gTuB45nNB/Qe3EG0JjVvL7Pg8BLwFFgIMsNgCNA79gCPgeBl4FfgeMZzfvHPgC6Cs4/HFgJ/AV0ZTQ/nH6wLyngsxd4HjhUwGcfsAq4toDP38CzwI9ZzE/KfP9Y4LoCPv8CXgJ+LeBzEFgD3F7A52/gKeBL4FQB84PAs8DtBXz2AB8Bi4CBIk0JeBW4rYDPbuBDYCHwZ8H5B4E1wC0FfHYBHwC3An8UMB8EXgMWFPDZCbwP3Ab8XsB8CHgdWFDAZwfwHnAr0J/V/A9gLbCggM924B3gFqA/o/mp9AN4O3BdAZ8/gHXAbQV8fgfeBm4G+rKYnwTWA7cX8PkN2JB+sH7LaH4CeBe4pYDPr8AG4GagN6P5ceBd4MYCPr8A7wM3Ab0ZzY8B7wE3FvD5GdgI3AD0ZDEX8zeBiwv4/ARsAq4HujOaHwXeB64v4PMjsBmYB3RnND8CvAdcV8DnB2AzcC3QldH8EPA+MI8J2n9Yzc8ALgeuKeDzPfAhMJeJ2X9YzU8DlwHXFPD5DtgCXMUE7D+s5qeAS4GrC/h8C2wFrmQC9h9W8xPAxcBVBXy+AbYBc5mA/YfV/DhwEXBlAZ+vge3AFUzA/sNqfgy4ELiigM9XwA7gciZg/wGoQ39NOOEEAQAAAABJRU5ErkJggg==';

        // ============================================
        // GLOBALS
        // ============================================
        let map = null;
        let carMarker = null;
        let routeLine = null;
        let currentIndex = 0;
        let lastBearing = 90;

        // ============================================
        // INITIALIZE MAP
        // ============================================
        function initMap() {
            const center = {
                lat: (RESTAURANT_POS.lat + CUSTOMER_POS.lat) / 2,
                lng: (RESTAURANT_POS.lng + CUSTOMER_POS.lng) / 2
            };

            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: center,
                disableDefaultUI: true,
                styles: [
                    { elementType: "geometry", stylers: [{ color: "#1a1a2e" }] },
                    { elementType: "labels.text.stroke", stylers: [{ color: "#1a1a2e" }] },
                    { elementType: "labels.text.fill", stylers: [{ color: "#6b6b80" }] },
                    { featureType: "road", elementType: "geometry", stylers: [{ color: "#353550" }] },
                    { featureType: "road", elementType: "labels.text.fill", stylers: [{ color: "#8a8a8a" }] },
                    { featureType: "water", elementType: "geometry", stylers: [{ color: "#0e0e1a" }] },
                    { featureType: "poi", stylers: [{ visibility: "off" }] },
                    { featureType: "transit", stylers: [{ visibility: "off" }] }
                ]
            });

            // Restaurant marker
            new google.maps.Marker({
                position: RESTAURANT_POS,
                map: map,
                icon: {
                    url: 'data:image/svg+xml,' + encodeURIComponent(`
                        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="18" cy="18" r="15" fill="#ff6b35" stroke="#fff" stroke-width="2"/>
                            <text x="18" y="24" text-anchor="middle" font-size="14">üçï</text>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(36, 36),
                    anchor: new google.maps.Point(18, 18)
                }
            });

            // Customer marker
            new google.maps.Marker({
                position: CUSTOMER_POS,
                map: map,
                icon: {
                    url: 'data:image/svg+xml,' + encodeURIComponent(`
                        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="18" cy="18" r="15" fill="#00d26a" stroke="#fff" stroke-width="2"/>
                            <text x="18" y="23" text-anchor="middle" font-size="13">üè†</text>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(36, 36),
                    anchor: new google.maps.Point(18, 18)
                }
            });

            // Route line
            routeLine = new google.maps.Polyline({
                path: ROUTE_POINTS,
                geodesic: true,
                strokeColor: '#00d26a',
                strokeOpacity: 0.7,
                strokeWeight: 5,
                map: map
            });

            // Car marker
            carMarker = new google.maps.Marker({
                position: ROUTE_POINTS[0],
                map: map,
                icon: createCarIcon(90),
                zIndex: 1000
            });

            // Start animation
            setTimeout(animate, 1500);
        }

        // ============================================
        // CAR ICON
        // ============================================
        function createCarIcon(bearing) {
            const rotation = bearing - 90; // Adjust for car pointing right
            return {
                url: 'data:image/svg+xml,' + encodeURIComponent(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44">
                        <g transform="rotate(${rotation}, 22, 22)">
                            <image href="${CAR_ICON_BASE64}" x="2" y="2" width="40" height="40"/>
                        </g>
                    </svg>
                `),
                scaledSize: new google.maps.Size(44, 44),
                anchor: new google.maps.Point(22, 22)
            };
        }

        // ============================================
        // BEARING CALCULATION
        // ============================================
        function getBearing(from, to) {
            const dLng = (to.lng - from.lng) * Math.PI / 180;
            const lat1 = from.lat * Math.PI / 180;
            const lat2 = to.lat * Math.PI / 180;
            
            const y = Math.sin(dLng) * Math.cos(lat2);
            const x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLng);
            
            return (Math.atan2(y, x) * 180 / Math.PI + 360) % 360;
        }

        // ============================================
        // SMOOTH ANIMATION
        // ============================================
        const MOVE_DURATION = 600; // ms per segment - smooth pace
        let moveStart = null;
        let fromPos = null;
        let toPos = null;

        function animate() {
            if (currentIndex >= ROUTE_POINTS.length - 1) {
                showDelivered();
                return;
            }

            fromPos = ROUTE_POINTS[currentIndex];
            toPos = ROUTE_POINTS[currentIndex + 1];
            moveStart = performance.now();

            // Update bearing
            const bearing = getBearing(fromPos, toPos);
            if (Math.abs(bearing - lastBearing) > 10) {
                lastBearing = bearing;
                carMarker.setIcon(createCarIcon(bearing));
            }

            // Update ETA
            const remaining = ROUTE_POINTS.length - currentIndex - 1;
            const eta = Math.max(1, Math.ceil(remaining * MOVE_DURATION / 60000));
            document.getElementById('etaValue').innerHTML = eta + ' <span>min</span>';

            requestAnimationFrame(step);
        }

        function step(timestamp) {
            const elapsed = timestamp - moveStart;
            const progress = Math.min(elapsed / MOVE_DURATION, 1);
            
            // Smooth easing
            const ease = 1 - Math.pow(1 - progress, 2);

            const lat = fromPos.lat + (toPos.lat - fromPos.lat) * ease;
            const lng = fromPos.lng + (toPos.lng - fromPos.lng) * ease;
            
            carMarker.setPosition({ lat, lng });

            if (progress < 1) {
                requestAnimationFrame(step);
            } else {
                currentIndex++;
                requestAnimationFrame(animate);
            }
        }

        function showDelivered() {
            document.getElementById('statusText').textContent = 'Delivered!';
            document.getElementById('mainStatus').textContent = 'Order Delivered! üéâ';
            document.getElementById('subStatus').textContent = 'Enjoy your meal!';
            document.getElementById('etaValue').innerHTML = '0 <span>min</span>';
            document.getElementById('progressFill').style.width = '100%';
            
            const step = document.getElementById('deliveryStep');
            step.classList.remove('active');
            step.classList.add('completed');
            step.querySelector('.step-icon').textContent = '‚úì';

            // Restart after 4 seconds
            setTimeout(() => location.reload(), 4000);
        }
    </script>
</body>
</html>
